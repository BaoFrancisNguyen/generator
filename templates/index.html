<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‡²ğŸ‡¾âš¡ GÃ©nÃ©rateur de DonnÃ©es Ã‰lectriques - Malaisie</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ‡²ğŸ‡¾âš¡ GÃ©nÃ©rateur de DonnÃ©es Ã‰lectriques</h1>
            <p style="font-size: 1.2em; opacity: 0.9;">Malaisie - DonnÃ©es ultra-rÃ©alistes avec climat tropical</p>
        </div>

        <!-- Formulaire principal -->
        <div class="card">
            <h2>ğŸ“Š Configuration de la GÃ©nÃ©ration</h2>
            
            <!-- Section de filtrage gÃ©ographique -->
            <div class="card" style="background: #f8f9fa; margin-bottom: 25px;">
                <h3 style="color: #495057; margin-bottom: 20px;">ğŸ—ºï¸ Filtrage GÃ©ographique</h3>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="locationMode">Mode de Localisation</label>
                        <select id="locationMode" onchange="toggleLocationMode()">
                            <option value="all">ğŸ‡²ğŸ‡¾ Toute la Malaisie</option>
                            <option value="filter">ğŸ¯ Filtrer par zone</option>
                            <option value="custom">â• Localisation personnalisÃ©e</option>
                        </select>
                    </div>
                </div>
                
                <!-- Filtres par zone -->
                <div id="filterSection" style="display: none;">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="filterRegion">ğŸŒ RÃ©gion</label>
                            <select id="filterRegion" onchange="updateStateOptions()">
                                <option value="all">Toutes les rÃ©gions</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="filterState">ğŸ›ï¸ Ã‰tat</label>
                            <select id="filterState" onchange="updateCityOptions()">
                                <option value="all">Tous les Ã©tats</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="filterCity">ğŸ™ï¸ Ville</label>
                            <select id="filterCity">
                                <option value="all">Toutes les villes</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="populationRange">ğŸ‘¥ Population</label>
                            <select id="populationRange" onchange="updatePopulationInputs()">
                                <option value="all">Toutes tailles</option>
                                <option value="large">Grandes villes (>500K)</option>
                                <option value="medium">Villes moyennes (200K-500K)</option>
                                <option value="small">Petites villes (<200K)</option>
                                <option value="custom">Plage personnalisÃ©e</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="customPopulationRange" style="display: none;">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="popMin">Population Min</label>
                                <input type="number" id="popMin" placeholder="Ex: 50000">
                            </div>
                            <div class="form-group">
                                <label for="popMax">Population Max</label>
                                <input type="number" id="popMax" placeholder="Ex: 1000000">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Localisation personnalisÃ©e -->
                <div id="customSection" style="display: none;">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="customCity">ğŸ™ï¸ Nom de la Ville</label>
                            <input type="text" id="customCity" placeholder="Ex: Nouvelle Ville">
                        </div>
                        
                        <div class="form-group">
                            <label for="customState">ğŸ›ï¸ Ã‰tat/Province</label>
                            <input type="text" id="customState" placeholder="Ex: Nouvel Ã‰tat">
                        </div>
                        
                        <div class="form-group">
                            <label for="customRegion">ğŸŒ RÃ©gion</label>
                            <select id="customRegion">
                                <option value="Central">Central</option>
                                <option value="Northern">Northern</option>
                                <option value="Southern">Southern</option>
                                <option value="East Coast">East Coast</option>
                                <option value="East Malaysia">East Malaysia</option>
                                <option value="Custom">RÃ©gion personnalisÃ©e</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="customPopulation">ğŸ‘¥ Population</label>
                            <input type="number" id="customPopulation" placeholder="Ex: 250000">
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="customLat">ğŸ“ Latitude</label>
                            <input type="number" step="0.000001" id="customLat" placeholder="Ex: 3.1390">
                        </div>
                        
                        <div class="form-group">
                            <label for="customLon">ğŸ“ Longitude</label>
                            <input type="number" step="0.000001" id="customLon" placeholder="Ex: 101.6869">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="numBuildings">ğŸ¢ Nombre de BÃ¢timents</label>
                    <input type="number" id="numBuildings" value="50" min="1" max="10000" onchange="updateEstimation()" oninput="updateEstimation()">
                    <small id="buildingGuidance" style="color: #666; font-size: 0.9em; margin-top: 5px; display: block;"></small>
                </div>
                
                <div class="form-group">
                    <label for="freq">â° FrÃ©quence d'Ã‰chantillonnage</label>
                    <select id="freq" onchange="updateEstimation()">
                        <option value="5T">5 minutes (trÃ¨s dÃ©taillÃ©)</option>
                        <option value="15T">15 minutes (dÃ©taillÃ©)</option>
                        <option value="30T" selected>30 minutes</option>
                        <option value="1H">1 heure (standard)</option>
                        <option value="2H">2 heures</option>
                        <option value="6H">6 heures</option>
                        <option value="12H">12 heures (2x/jour)</option>
                        <option value="1D">1 jour (quotidien)</option>
                        <option value="1W">1 semaine (hebdomadaire)</option>
                        <option value="1M">1 mois (mensuel)</option>
                    </select>
                    <small id="freqInfo" style="color: #666; font-size: 0.9em;"></small>
                </div>
                
                <div class="form-group">
                    <label for="startDate">ğŸ“… Date de DÃ©but</label>
                    <input type="date" id="startDate" value="2024-01-01" onchange="updateEstimation()">
                </div>
                
                <div class="form-group">
                    <label for="endDate">ğŸ“… Date de Fin</label>
                    <input type="date" id="endDate" value="2024-01-31" onchange="updateEstimation()">
                </div>
            </div>
            
            <!-- Section d'estimation -->
            <div class="estimation-card" id="estimationCard">
                <h3>ğŸ“Š Estimation du Dataset</h3>
                <div class="estimation-grid">
                    <div class="estimation-item">
                        <span class="estimation-label">ğŸ“ˆ Observations totales:</span>
                        <span class="estimation-value" id="totalObservations">-</span>
                    </div>
                    <div class="estimation-item">
                        <span class="estimation-label">ğŸ’¾ Taille fichier (~):</span>
                        <span class="estimation-value" id="fileSize">-</span>
                    </div>
                    <div class="estimation-item">
                        <span class="estimation-label">â±ï¸ Temps gÃ©nÃ©ration (~):</span>
                        <span class="estimation-value" id="generationTime">-</span>
                    </div>
                    <div class="estimation-item">
                        <span class="estimation-label">ğŸ¯ Cas d'usage:</span>
                        <span class="estimation-value" id="useCase">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Section de recommandations -->
            <div class="guidance-section">
                <h4>ğŸ’¡ Guide de Configuration</h4>
                <div class="guidance-recommendations">
                    <div class="recommendation-item">
                        <strong>ğŸ§ª Test Rapide</strong><br>
                        5-20 bÃ¢timents, 1 semaine, 1H<br>
                        <em>~3K observations, <10s</em>
                    </div>
                    <div class="recommendation-item">
                        <strong>ğŸ“š DÃ©veloppement</strong><br>
                        50-200 bÃ¢timents, 1-3 mois, 30T<br>
                        <em>~200K observations, 1-3min</em>
                    </div>
                    <div class="recommendation-item">
                        <strong>ğŸ¤– Machine Learning</strong><br>
                        200-1000 bÃ¢timents, 6-12 mois, 1H<br>
                        <em>~1M observations, 5-10min</em>
                    </div>
                    <div class="recommendation-item">
                        <strong>ğŸ­ Production</strong><br>
                        1000-5000 bÃ¢timents, 1-3 ans, 30T<br>
                        <em>~20M observations, 20+ min</em>
                    </div>
                    <div class="recommendation-item">
                        <strong>ğŸ“Š Analyse Quotidienne</strong><br>
                        100-500 bÃ¢timents, 1 an, 1D<br>
                        <em>~180K observations, 1min</em>
                    </div>
                    <div class="recommendation-item">
                        <strong>ğŸ“ˆ Tendances Long Terme</strong><br>
                        1000+ bÃ¢timents, 5+ ans, 1W/1M<br>
                        <em>~500K observations, 3-5min</em>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn" onclick="generateData()">ğŸš€ GÃ©nÃ©rer et Visualiser</button>
                <button class="btn btn-success" onclick="downloadData()">ğŸ’¾ GÃ©nÃ©rer et TÃ©lÃ©charger</button>
                <button class="btn btn-warning" onclick="showSample()">ğŸ‘ï¸ Voir un Ã‰chantillon</button>
            </div>
        </div>

        <!-- Zone de chargement -->
        <div class="loading" id="loading">
            <h2>ğŸŒ´ GÃ©nÃ©ration en cours pour la Malaisie...</h2>
            <p>CrÃ©ation de donnÃ©es Ã©lectriques tropicales rÃ©alistes, veuillez patienter.</p>
            <div style="margin-top: 20px;">
                <div class="spinner"></div>
            </div>
        </div>

        <!-- RÃ©sultats -->
        <div class="results" id="results">
            <div id="alerts"></div>
            <div class="stats-grid" id="statsGrid"></div>
            <div id="dataPreview"></div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>